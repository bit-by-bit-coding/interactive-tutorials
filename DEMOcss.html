

<!DOCTYPE html>
<html>
<head>
<title>Try It Yourself &raquo;</title>
<meta name="viewport" content="width=device-width">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--<link rel="stylesheet" href="/w3css/4/w3.css">
<link rel="stylesheet" href="/lib/codemirror.css">-->
<script src="/lib/codemirror.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">-->
<link rel="stylesheet" href="/w3css/4/w3.css">
<link rel="stylesheet" href="/lib/codemirror.css">
<script src="/lib/codemirror.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">-->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-3855518-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
<script>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>
<script type='text/javascript'>
// GPT slots
var gptAdSlots = [];
googletag.cmd.push(function() {
  var leaderMapping = googletag.sizeMapping().
  // Mobile ad
  addSize([0, 0], [320, 50]). 
  // Vertical Tablet ad
  addSize([468, 0], [468, 60]). 
  // Horizontal Tablet
  addSize([728, 0], [728, 90]).
  // Desktop and bigger ad
  addSize([970, 0], [[728, 90], [970, 90]]).build();
  // addSize([970, 0], [728, 90]).build();
  gptAdSlots[0] = googletag.defineSlot('/16833175/TryitLeaderboard', [[728, 90], [970, 90]], 'div-gpt-ad-1428407818244-0').
  // gptAdSlots[0] = googletag.defineSlot('/16833175/TryitLeaderboard', [728, 90], 'div-gpt-ad-1428407818244-0').
  defineSizeMapping(leaderMapping).addService(googletag.pubads());
  googletag.pubads().setTargeting("content","try" + (function () {
    var folder = location.pathname;
    folder = folder.replace("/", "");
    folder = folder.substr(0, folder.indexOf("/"));
    return folder;
  })()
  );
  googletag.enableServices();
});
</script>-->
<script>
if (window.addEventListener) {              
    window.addEventListener("resize", browserResize);
} else if (window.attachEvent) {                 
    window.attachEvent("onresize", browserResize);
}
var xbeforeResize = window.innerWidth;

function browserResize() {
    var afterResize = window.innerWidth;
    if ((xbeforeResize < (970) && afterResize >= (970)) || (xbeforeResize >= (970) && afterResize < (970)) ||
        (xbeforeResize < (728) && afterResize >= (728)) || (xbeforeResize >= (728) && afterResize < (728)) ||
        (xbeforeResize < (468) && afterResize >= (468)) ||(xbeforeResize >= (468) && afterResize < (468))) {
        xbeforeResize = afterResize;
        googletag.cmd.push(function() {
            googletag.pubads().refresh([gptAdSlots[0]]);
        });
    }
    if (window.screen.availWidth <= 768) {
      restack(window.innerHeight > window.innerWidth);
    }
    fixDragBtn();
    showFrameSize();    
}
var fileID = "";
var loadSave = false;
function getSavedFile() {
    loadSave = true;
    var htmlCode;
    var paramObj = {};
    paramObj.fileid = "";
    fileID = paramObj.fileid;
    var paramA = JSON.stringify(paramObj);
    var httpA = new XMLHttpRequest();
    httpA.open("POST", globalURL, true);
    httpA.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    httpA.onreadystatechange = function() {
        if(httpA.readyState == 4 && httpA.status == 200) {
            document.getElementById("textareaCode").value = httpA.responseText;
            window.editor.getDoc().setValue(httpA.responseText);
            loadSave = false;
        }
    }
    httpA.send(paramA);   
}

</script>
<style>
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
body {
  color:#000000;
  margin:0px;
  font-size:100%;
}

.trytopnav {
  height:40px;
  overflow:hidden;
  min-width:380px;
  position:absolute;
  width:100%;
  top:5px;
}
.runbutton, .instructions, .fullscreen, #select {
    background-color: #307bdd;
    color: white;
    font-size: 30px;
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    margin: 0px;
    margin-top: 20px;
    position: relative;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 2px solid white;
    cursor: pointer;
    box-shadow: 4px 4px 5px #888888;
    width: 350px;
}
.runbutton:hover, .instructions:hover, .fullscreen:hover, #select:hover {
    background: linear-gradient(to right, #ffffff, #ffffff);
    color: #307bdd;
    border: 2px solid white;
    box-shadow: 8px 8px 5px #888888;
}
#runcont, #instcont, #fullcont, #selectcont {
  float: left;
  width: 25%;
}
#framesize span {
  font-family:Consolas, monospace;
}
#container {
  background-color:transparent;
  width:100%;
  height: 800px;
  overflow:auto;
  position:absolute;
  top:70px;
}
#textareacontainer, #iframecontainer {
  float:left;
  height:800px;
  width:50%;
}
#textarea, #iframe {
  width:100%;
  height: 100%;
  padding-bottom:0px;
  padding-top:0px;
  border: 1px solid black;
}
#iframecontainer {
    float: left;
    height: 800px;
    width: 50%;
    position: static;
    top: 0px;
    left: 0px;
}
#textarea {
  padding-left:0px;
  padding-right:0px;  
  border: 4px solid white;
}
#iframe {
  padding-left:0px;
  padding-right:0px;  
  border: 4px solid white;
}
#textareawrapper {
  width:100%;
  height:100%;
  background-color: transparent;
  position: relative;
  color: white;
}
#iframewrapper {
  width:100%;
  height:50%;
  -webkit-overflow-scrolling: touch;
  background-color: #ffffff;
  border: 1px solid black;
}
#textareaCode {
  background-color: black;
  color: white;
  font-family: Tahoma, Geneva, sans-serif;
  font-size:16px;
  height:45%;
  width:100%;
  padding:8px;
  resize: none;
  border:none;
  line-height:normal;    
  -webkit-transition: 0.5s;
  transition: 0.5s;
}
#textareaCodeB {
  background-color: black;
  color: white;
  font-family: Tahoma, Geneva, sans-serif;
  font-size:16px;
  height:45%;
  width:100%;
  padding:8px;
  resize: none;
  border:none;
  line-height:normal;    
  -webkit-transition: 0.5s;
  transition: 0.5s;
}
#textareaCode:hover {
    cursor: cell;
    background-color: #012;
}
#textareaCodeB:hover {
    cursor: cell;
    background-color: #012;
}
.CodeMirror.cm-s-default {
  line-height:normal;
  padding: 4px;
  height:100%;
  width:100%;
}
#iframeResult, #iframeSource {
  background-color: white;
  height:100%;
  width:100%;  
}
#stackV {background-color:#999999;}
#stackV:hover {background-color:#BBBBBB !important;}
#stackV.horizontal {background-color:transparent;}
#stackV.horizontal:hover {background-color:#BBBBBB !important;}
#stackH.horizontal {background-color:#999999;}
#stackH.horizontal:hover {background-color:#999999 !important;}
#textareacontainer.horizontal,#iframecontainer.horizontal{
  height:50%;
  float:none;
  width:100%;
}
#textarea.horizontal{
  height:100%;
  padding-left:10px;
  padding-right:10px;
}
#goodwebsite {
  height:50%;
  width:100%;
  background-color:white;
  border: 1px solid black;
  padding-left: 8px;
  padding-right: 8px;
}
#iframe.horizontal{
  height:100%;
  padding-right:10px;
  padding-bottom:10px;
  padding-left:10px;  
}
#container.horizontal{
  min-height:200px;
  margin-left:0;
}
#tryitLeaderboard {
  overflow:hidden;
  text-align:center;
  margin-top:5px;
  height:90px;
}
  .w3-dropdown-content {width:350px}
      .ui-button {
        float: right;
        border: 3px solid gray;
      }
      .ui-button:hover {
        cursor: pointer;
        background-color: red;
        color: white;
        transition: 0.25s;
      }
    .ui-draggable-handle {
      background-color: black;
      padding: 10px;
    }
    .ui-draggable-handle:hover {
      cursor: move;
      background-color: #222;
    }
    .ui-dialog {
        display: block;
        padding: 10px;
        border: 1px solid #DDD;
        background: linear-gradient(to right, #307bdd , #00F);
        font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
        color: white;
        box-shadow: 8px 8px 5px #888888;
    }
    .ui-widget-content, .ui-widget-header {
      color: white;
    }
</style>
</head>
<body>
  <div id="dialog" title="ALERT">
    <p id="message" style="color:white">The HTML code on the left affects the webpage on the upper right. Your goal is to change the HTML code so that the upper right webpage will match with the lower right webpage. When you feel you have matched the two websites, click the VERIFY button to see how you did. Good luck!<br><br>(Click "Close" to exit.)</p>
  </div>
  <div style="background-color:#2064bc;padding:10px;position:absolute;top:0px;width:100%;height:70px;border:5px solid black;">
    <div id="runcont"><button id="runbutton" class="runbutton">Verify &raquo;</button></div>
    <div id="selectcont">
        <select name="select" id="select">
            <option value="standard">Standard Difficulty</option>
            <option value="hard">Harder Difficulty</option>
            <option value="reveal">Reveal Answer</option>
          </select>
    </div>
    <div id="instcont"><button id="instructions" class="instructions" onclick="dialog()">Instructions [?]</button></div>
    <div id="fullcont"><button id="fullscreen" class="fullscreen" onclick="toggleScreen()"></button></div>
  </div>
<div id="container">
<div id="menuOverlay" class="w3-overlay w3-transparent" style="cursor:pointer;z-index:4"></div>
  <div id="textareacontainer">
    <div id="textarea">
      <div id="textareawrapper"><span style="font-size:25px;font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;color:black;">CSS</span>
<textarea autocomplete="on" id="textareaCode" wrap="logical" spellcheck="false" onkeyup="submitTryit(1);" onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}">
</textarea><span style="font-size:25px;font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;color:black;">HTML</span>
<textarea autocomplete="on" id="textareaCodeB" wrap="logical" spellcheck="false" onkeyup="submitTryit(1);" onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}">
<body>
  <p id="one">This text has an id of <code>"one"</code>, is red,  and aligned to the left.</p>
  <p id="two">This text has an id of <code>"two"</code>, is blue,  and centered in the middle of the page.</p>
  <p id="three">This text has an id of <code>"three"</code>, is green,  and aligned to the right.</p>
  <div>The border of this div is red with a width of 5 pixels. The background color is yellow. The width and height are both 200 pixels. This div is also centered.</div>
</body>
</textarea>
        <form id="codeForm" autocomplete="off" style="margin:0px;display:none;">
          <input type="hidden" name="code" id="code" />
        </form>
       </div>
    </div>
  </div>
  <div id="iframecontainer">
    <div id="iframe">
      <div id="iframewrapper"></div>
      <div id="goodwebsite">
        <p style="color:red;">This text has an id of <code>"one"</code>, is red,  and aligned to the left.</p>
        <p style="color:blue;text-align:center;">This text has an id of <code>"two"</code>, is blue,  and centered in the middle of the page.</p>
        <p style="color:green;text-align:right;">This text has an id of <code>"three"</code>, is green,  and aligned to the right.</p>
        <div style="margin:auto;border:5px solid red;background-color:yellow;width:200px;height:200px;">The border of this div is red with a width of 5 pixels. The background color is yellow. The width and height are both 200 pixels. This div is also centered.</div>
      </div>
    </div>
  </div>
</div>

<script>
var message = "";
var validated = true;
function validateHTML() {
    var elementList = ["#one", "#two", "#three", "div"];
    for (var i = 0; i < elementList.length; i++) {
        if (!($("#iframeResult").contents().find(elementList[i]).length))
            return false;
    }
    return true;
}
function dialog() {
  document.getElementById("message").innerHTML = "The HTML/CSS code on the left affects the webpage on the upper right. Your goal is to change the CSS code within the style tags so that the upper right webpage will match with the lower right webpage. When you feel you have matched the two websites, click the VERIFY button to see how you did. Good luck!<br><br>(Click \"Close\" to exit.)";
  $(".ui-dialog").css("background", "linear-gradient(to right, #307bdd, #00F)");
  $( function() {
    $( "#dialog" ).dialog();
  } );
}
$(document).ready(function(){
  $("#select").change(function() {
      if ($("#select").val() == "standard") {
          document.getElementById("textareaCode").value = "";
          document.getElementById("textareaCodeB").value = "<body>\n\t<p id=\"one\">This text has an id of \"one\", is red,  and aligned to the left.</p>\n\t<p id=\"two\">This text has an id of \"two\", is blue,  and centered in the middle of the page.</p>\n\t<p id=\"three\">This text has an id of \"three\", is green,  and aligned to the right.</p>\n\t<div>The border of this div is red with a width of 5 pixels. The background color is yellow. The width and height are both 200 pixels. This div is also centered.</div>\n</body>";
      }
      else if ($("#select").val() == "hard") {
          document.getElementById("textareaCode").value = "";
          document.getElementById("textareaCodeB").value = "";
      }
      else if ($("#select").val() == "reveal") {
          document.getElementById("textareaCode").value = "#one {\n\tcolor: red;\n}\n#two {\n\tcolor: blue;\n\ttext-align: center;\n}\n#three {\n\tcolor: green;\n\ttext-align: right;\n}\ndiv {\n\tborder: 5px solid red;\n\tbackground-color: yellow;\n\twidth: 200px;\n\theight: 200px;\n\tmargin: auto;\n}"
          document.getElementById("textareaCodeB").value = "<body>\n\t<p id=\"one\">This text has an id of \"one\", is red,  and aligned to the left.</p>\n\t<p id=\"two\">This text has an id of \"two\", is blue,  and centered in the middle of the page.</p>\n\t<p id=\"three\">This text has an id of \"three\", is green,  and aligned to the right.</p>\n\t<div>The border of this div is red with a width of 5 pixels. The background color is yellow. The width and height are both 200 pixels. This div is also centered.</div>\n</body>";
      }
      submitTryit(1);
  });
  $(".runbutton").click(function(){
        $( function() {
            $( "#dialog" ).dialog();
        } );
      if (!validateHTML()) {
        $(".ui-dialog").css("background", "linear-gradient(to right, #700 , #F00)");
        document.getElementById("message").innerText = "WARNING: Some HTML tags are missing. Reload the page and do not delete or modify any HTML tags. This is a CSS exercise.";
        $( function() {
            $( "#dialog" ).dialog();
        } );
      }
      else {
      message = "You are either missing or need to recheck:\n";
      validated = true;
      if ($("#iframeResult").contents().find("#one").css("color") != "rgb(255, 0, 0)") {
          message += "-   color of <p> with id \"one\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("#one").css("text-align") != "left" && $("#iframeResult").contents().find("#one").css("text-align") != "start") {
          message += "-   alignment of <p> with id \"one\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("#two").css("color") != "rgb(0, 0, 255)") {
          message += "-   color of <p> with id \"two\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("#two").css("text-align") != "center") {
          message += "-   alignment of <p> with id \"two\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("#three").css("color") != "rgb(0, 128, 0)") {
          message += "-   color of <p> with id \"three\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("#three").css("text-align") != "right") {
          message += "-   alignment of <p> with id \"three\"\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("div").css("background-color") != "rgb(255, 255, 0)") {
          message += "-   background color of <div>\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("div").css("border-color") != "rgb(255, 0, 0)") {
          message += "-   border color of <div>\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("div").css("border-width") != "5px") {
          message += "-   border width of <div>\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("div").css("width") != "200px") {
          message += "-   width of <div>\n";
          validated = false;
      }
      if ($("#iframeResult").contents().find("div").css("height") != "200px") {
          message += "-   height of <div>\n";
          validated = false;
      }
      var marginData = "0px " + ($("#iframeResult").contents().find("div").offset().left - $("#iframeResult").contents().find("div").position().left) + "px";
      if ($("#iframeResult").contents().find("div").css("margin") != marginData) {
          message += "-   alignment of <div>\n";
          validated = false;
      }
  if (validated) {
        message = "Congratulations! The websites match!\n\nFeel free to play around with the CSS or even the HTML with the utmost freedom!";
        $(".ui-dialog").css("background", "linear-gradient(to right, #070 , #0F0)");
    }
    else {
      $(".ui-dialog").css("background", "linear-gradient(to right, #700 , #F00)");
    }
    document.getElementById("message").innerText = message;
    $( function() {
      $( "#dialog" ).dialog();
  } );
    }

  });
});
var iframecontainer = document.getElementById("iframecontainer");
var fullscreen = document.getElementsByClassName("fullscreen");
iframecontainer.style.position = "static";
iframecontainer.style.width = "50%";
iframecontainer.style.height = "800px";
iframecontainer.style.top = "0px";
fullscreen[0].textContent = "Maximize iFrame [+]";
function toggleScreen() {
    if (iframecontainer.style.position == "static") {
        iframecontainer.style.position = "absolute";
        iframecontainer.style.width = "100%";
        iframecontainer.style.height = "100%";
        iframecontainer.style.top = "0px";
        fullscreen[0].textContent = "Minimize iFrame [-]";
    }
    else {
        iframecontainer.style.position = "static";
        iframecontainer.style.width = "50%";
        iframecontainer.style.height = "800px";
        iframecontainer.style.top = "0px";
        fullscreen[0].textContent = "Maximize iFrame [+]";
    }
}
submitTryit()

function submitTryit(n) {
  if (window.editor) {
    window.editor.save();
  }
  var text = "<head>\n<style>\n" + document.getElementById("textareaCode").value + "\n</style>\n</head>\n" + document.getElementById("textareaCodeB").value;
  var ifr = document.createElement("iframe");
  ifr.setAttribute("frameborder", "0");
  ifr.setAttribute("id", "iframeResult");
  ifr.setAttribute("name", "iframeResult");  
  document.getElementById("iframewrapper").innerHTML = "";
  document.getElementById("iframewrapper").appendChild(ifr);
  if (loadSave == true ) {
    ifr.setAttribute("src", "/code/opentext.htm");
  } else if (fileID != "" && loadSave == false) {
    var t=text;
    var pos=t.search(/script/i)
    document.getElementById("code").value=t;
    document.getElementById('codeForm').method = "post";
    document.getElementById('codeForm').acceptCharset = "utf-8";
    document.getElementById('codeForm').target = "iframeResult";
    document.getElementById("codeForm").submit();
  } else {
    var ifrw = (ifr.contentWindow) ? ifr.contentWindow : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;
    ifrw.document.open();
    ifrw.document.write(text);  
    ifrw.document.close();
    if (ifrw.document.body && !ifrw.document.body.isContentEditable) {
      ifrw.document.body.contentEditable = true;
      ifrw.document.body.contentEditable = false;
    }
  }
}
var currentStack=true;
if ((window.screen.availWidth <= 768 && window.innerHeight > window.innerWidth) || "" == " horizontal") {restack(true);}
function restack(horizontal) {
    var tc, ic, t, i, c, f, sv, sh, d, height, flt, width;
    tc = document.getElementById("textareacontainer");
    ic = document.getElementById("iframecontainer");
    t = document.getElementById("textarea");
    i = document.getElementById("iframe");
    c = document.getElementById("container");    
    sv = document.getElementById("stackV");
    sh = document.getElementById("stackH");
    tc.className = tc.className.replace("horizontal", "");
    ic.className = ic.className.replace("horizontal", "");        
    t.className = t.className.replace("horizontal", "");        
    i.className = i.className.replace("horizontal", "");        
    c.className = c.className.replace("horizontal", "");                        
    if (sv) {sv.className = sv.className.replace("horizontal", "")};
    if (sv) {sh.className = sh.className.replace("horizontal", "")};
    stack = "";
    if (horizontal) {
        tc.className = tc.className + " horizontal";
        ic.className = ic.className + " horizontal";        
        t.className = t.className + " horizontal";        
        i.className = i.className + " horizontal";                
        c.className = c.className + " horizontal";                
        if (sv) {sv.className = sv.className + " horizontal"};
        if (sv) {sh.className = sh.className + " horizontal"};
        stack = " horizontal";
        document.getElementById("textareacontainer").style.height = "50%";
        document.getElementById("iframecontainer").style.height = "50%";
        document.getElementById("textareacontainer").style.width = "100%";
        document.getElementById("iframecontainer").style.width = "100%";
        currentStack=false;
    } else {
        document.getElementById("textareacontainer").style.height = "100%";
        document.getElementById("iframecontainer").style.height = "100%";
        document.getElementById("textareacontainer").style.width = "50%";
        document.getElementById("iframecontainer").style.width = "50%";
        currentStack=true;        
    }
    fixDragBtn();
    showFrameSize();
}
function showFrameSize() {
  var t;
  var width, height;
  width = Number(w3_getStyleValue(document.getElementById("iframeResult"), "width").replace("px", "")).toFixed();
  height = Number(w3_getStyleValue(document.getElementById("iframeResult"), "height").replace("px", "")).toFixed();
  document.getElementById("framesize").innerHTML = "Result Size: <span>" + width + " x " + height + "</span>";
}
var dragging = false;
var stack;
function fixDragBtn() {
  var textareawidth, leftpadding, dragleft, containertop, buttonwidth
  var containertop = Number(w3_getStyleValue(document.getElementById("container"), "top").replace("px", ""));
  if (stack != " horizontal") {
    document.getElementById("dragbar").style.width = "5px";    
    textareasize = Number(w3_getStyleValue(document.getElementById("textareawrapper"), "width").replace("px", ""));
    leftpadding = Number(w3_getStyleValue(document.getElementById("textarea"), "padding-left").replace("px", ""));
    buttonwidth = Number(w3_getStyleValue(document.getElementById("dragbar"), "width").replace("px", ""));
    textareaheight = w3_getStyleValue(document.getElementById("textareawrapper"), "height");
    dragleft = textareasize + leftpadding + (leftpadding / 2) - (buttonwidth / 2);
    document.getElementById("dragbar").style.top = containertop + "px";
    document.getElementById("dragbar").style.left = dragleft + "px";
    document.getElementById("dragbar").style.height = textareaheight;
    document.getElementById("dragbar").style.cursor = "col-resize";
    
  } else {
    document.getElementById("dragbar").style.height = "5px";
    if (window.getComputedStyle) {
        textareawidth = window.getComputedStyle(document.getElementById("textareawrapper"),null).getPropertyValue("height");
        textareaheight = window.getComputedStyle(document.getElementById("textareawrapper"),null).getPropertyValue("width");
        leftpadding = window.getComputedStyle(document.getElementById("textarea"),null).getPropertyValue("padding-top");
        buttonwidth = window.getComputedStyle(document.getElementById("dragbar"),null).getPropertyValue("height");
    } else {
        dragleft = document.getElementById("textareawrapper").currentStyle["width"];
    }
    textareawidth = Number(textareawidth.replace("px", ""));
    leftpadding = Number(leftpadding .replace("px", ""));
    buttonwidth = Number(buttonwidth .replace("px", ""));
    dragleft = containertop + textareawidth + leftpadding + (leftpadding / 2);
    document.getElementById("dragbar").style.top = dragleft + "px";
    document.getElementById("dragbar").style.left = "5px";
    document.getElementById("dragbar").style.width = textareaheight;
    document.getElementById("dragbar").style.cursor = "row-resize";        
  }
}
function dragstart(e) {
  e.preventDefault();
  dragging = true;
  var main = document.getElementById("iframecontainer");
}
function dragmove(e) {
  if (dragging) 
  {
    document.getElementById("shield").style.display = "block";        
    if (stack != " horizontal") {
      var percentage = (e.pageX / window.innerWidth) * 100;
      if (percentage > 5 && percentage < 98) {
        var mainPercentage = 100-percentage;
        document.getElementById("textareacontainer").style.width = percentage + "%";
        document.getElementById("iframecontainer").style.width = mainPercentage + "%";
        fixDragBtn();
      }
    } else {
      var containertop = Number(w3_getStyleValue(document.getElementById("container"), "top").replace("px", ""));
      var percentage = ((e.pageY - containertop + 20) / (window.innerHeight - containertop + 20)) * 100;
      if (percentage > 5 && percentage < 98) {
        var mainPercentage = 100-percentage;
        document.getElementById("textareacontainer").style.height = percentage + "%";
        document.getElementById("iframecontainer").style.height = mainPercentage + "%";
        fixDragBtn();
      }
    }
    showFrameSize();    
  }
}
function dragend() {
  document.getElementById("shield").style.display = "none";
  dragging = false;
  if (window.editor) {
    window.editor.refresh();
  }
}
if (window.addEventListener) {              
  document.getElementById("dragbar").addEventListener("mousedown", function(e) {dragstart(e);});
  document.getElementById("dragbar").addEventListener("touchstart", function(e) {dragstart(e);});
  window.addEventListener("mousemove", function(e) {dragmove(e);});
  window.addEventListener("touchmove", function(e) {dragmove(e);});
  window.addEventListener("mouseup", dragend);
  window.addEventListener("touchend", dragend);
  window.addEventListener("load", fixDragBtn);
  window.addEventListener("load", showFrameSize);
}
function click_savebtn() {
  if (window.editor) {
    window.editor.save();
  }
  document.getElementById('saveModal').style.display = 'block';
}
function click_google_savebtn() {
  if (window.editor) {
    window.editor.save();
  }
  document.getElementById('driveSaveModal').style.display='block'
}

function click_google_loadbtn() {
  document.getElementById('driveLoadModal').style.display='block'
}


function colorcoding() {  
  window.editor = CodeMirror.fromTextArea(document.getElementById("textareaCode"), {
    mode: "text/html",
    htmlMode: true,
    lineWrapping: true,
    smartIndent: false,
    addModeClass: true
  });
}
colorcoding();

function w3_getStyleValue(elmnt,style) {
    if (window.getComputedStyle) {
        return window.getComputedStyle(elmnt,null).getPropertyValue(style);
    } else {
        return elmnt.currentStyle[style];
    }
}
//SAVE AND OPEN SCRIPT
var oauthToken;
var userAction;
var pickerApiLoaded;
var developerKey = 'AIzaSyAMZDPXiGcCNWs1UCWG9LS6kkW5YiABfJ0';
var CLIENT_ID = '451843133508-ckbr5r6ch1ofqbmh87oll4u6ltinqv2t.apps.googleusercontent.com';
var SCOPES = ['https://www.googleapis.com/auth/drive.file'];

//Check if current user has authorized this application
function checkAuth() {
    gapi.auth.authorize(
    {
        'client_id': CLIENT_ID,
        'scope': SCOPES.join(' '),
        'immediate': true
    }, handleAuthResult);
}

//Handle response from authorization server
function handleAuthResult(authResult) {
    if (authResult && !authResult.error) {
        oauthToken = authResult.access_token;
        loadApi();
    }
}

// Initiate auth flow in response to user clicking authorize button
function handleAuthClick(event,userClick) {
    userAction = userClick;
    gapi.auth.authorize(
        {client_id: CLIENT_ID, scope: SCOPES, immediate: false},
        handleAuthResult);
    return false;
}

// Load API library
function loadApi() {
    gapi.client.load('drive', 'v3');
    gapi.load('picker', {'callback': onPickerApiLoad});
}
function onPickerApiLoad() {
    pickerApiLoaded = true;
    if (userAction=="save") {
        userAction="";
        document.getElementById('driveText').style.display='none';
        document.getElementById('driveSavedPanel').style.display='block';
        createFileWithHTMLContent(document.getElementById('googleFileName').value,document.getElementById('textareaCode').value)     
    }
    if (userAction=="open") {
        userAction="";
        createPicker();
    }
}

// Create and render a Picker object for picking HTML file
function createPicker() {
    if (pickerApiLoaded) {
        var view = new google.picker.View(google.picker.ViewId.DOCS);
        view.setMimeTypes("text/html");
        var picker = new google.picker.PickerBuilder().
            addView(view).
            setOAuthToken(oauthToken).
            setDeveloperKey(developerKey).
            setCallback(pickerCallback).
            build();
        picker.setVisible(true);
    }
}
// Put content of file in tryit editor
function pickerCallback(data) {
    var docID = '';
    if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
        var doc = data[google.picker.Response.DOCUMENTS][0];
        docID = doc[google.picker.Document.ID];
        getContentOfFile(docID);
    }
}

//Get contents
function getContentOfFile(theID){
    gapi.client.request({'path': '/drive/v2/files/'+theID,'method': 'GET',callback: function ( theResponseJS, theResponseTXT ) {
        var myToken = gapi.auth.getToken();
        var myXHR   = new XMLHttpRequest();
        myXHR.open('GET', theResponseJS.downloadUrl, true );
        myXHR.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token );
        myXHR.onreadystatechange = function( theProgressEvent ) {
            if (myXHR.readyState == 4) {
                if ( myXHR.status == 200 ) {
                    var code = myXHR.response;
                    document.getElementById("textareaCode").value=code;
                    window.editor.getDoc().setValue(code);
                    submitTryit(1);
                    resetDriveLoadModal();
                }
            }
        }
        myXHR.send();
        }
    });
}

var createFileWithHTMLContent = function(name,data,callback) {
    const boundary = '-------314159265358979323846';
    const delimiter = "\r\n--" + boundary + "\r\n";
    const close_delim = "\r\n--" + boundary + "--";
    const contentType = 'text/html';

    var metadata = {
        'name': name,
        'mimeType': contentType
    };

    var multipartRequestBody =
        delimiter +
        'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n\r\n' +
        data +
        close_delim;

    var request = gapi.client.request({
        'path': '/upload/drive/v3/files',
        'method': 'POST',
        'params': {'uploadType': 'multipart'},
        'headers': {
            'Content-Type': 'multipart/related; boundary="' + boundary + '"'
        },
        'body': multipartRequestBody});
    if (!callback) {
        callback = function(file) {
            console.log(file);
            document.getElementById("driveSavedText").innerHTML = file.name + " saved in Google Drive";
            document.getElementById("driveSavedPanel").className = "w3-panel w3-large";
        };
    }
    request.execute(callback);
}

if (navigator.userAgent.indexOf("MSIE") > 0 || navigator.userAgent.indexOf("Edge") > 0) {
    document.getElementById("saveGDriveBtn").style.display = "none";
    document.getElementById("loadGDriveBtn").style.display = "none";
}


function resetDriveSaveModal() {
    document.getElementById('driveSavedText').innerHTML='';
    document.getElementById('driveSaveModal').style.display='none'
    document.getElementById('driveSavedPanel').style.display='none'
    document.getElementById('driveText').style.display='block'
    document.getElementById("driveSavedPanel").className = "w3-panel w3-large loader";
}
function resetDriveLoadModal() {
    document.getElementById('driveLoadModal').style.display='none'
}

function saveFile(code) {
    document.getElementById('preSave').style.display='none';
    if (code.length>20000) {
        document.getElementById('errorSave').style.display='block';    
        return;
    }
    document.getElementById('postSave').style.display='block';    
    var paramObj = {};
    paramObj.code = code;
    var paramB = JSON.stringify(paramObj);
    var httpB = new XMLHttpRequest();
    httpB.open("POST", globalURL, true);

    httpB.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

    httpB.onreadystatechange = function() {
    if(httpB.readyState == 4 && httpB.status == 200) {
        if(httpB.responseText.substr(0,2) == "OK" ) {
          var getId = httpB.responseText.substr(2);
          document.getElementById("shareLink").href = "/code/tryit.asp?filename=" + getId;
          document.getElementById("shareLinkText").innerHTML = "https://www.w3schools.com/code/tryit.asp?filename=" + getId;
          document.getElementById('saveLoader').style.display = "none";
          document.getElementById("saveModalSaved").style.display  = "block";
        }
    }
    }
    httpB.send(paramB);
}
function hideAndResetModal() {
    document.getElementById("saveModal").style.display = "none";
    document.getElementById('preSave').style.display = "block";
    document.getElementById('errorSave').style.display = "none";    
    document.getElementById('postSave').style.display = "none";
    document.getElementById("saveModalSaved").style.display = "none";
    document.getElementById('saveDisclaimer').style.display= "none";
    document.getElementById('saveLoader').style.display = "block";
}

var addr = document.location.href;
function displayError() {
  document.getElementById("err_url").value = addr;
  document.getElementById("err_form").style.display = "block";
  document.getElementById("err_email").focus();
  hideSent();
}
function hideError() {
  document.getElementById("err_form").style.display = "none";
}
function hideSent() {
  document.getElementById("err_sent").style.display = "none";
}
function sendErr() {
  var xmlhttp;
  var err_url = document.getElementById("err_url").value;
  var err_email = document.getElementById("err_email").value;
  var err_desc = document.getElementById("err_desc").value;
  if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  } else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("POST", "/err_sup.asp", true);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
  document.getElementById("err_desc").value = "";
  hideError();
  document.getElementById("err_sent").style.display = "block";
}
function openMenu() {
    var x = document.getElementById("navbarDropMenu");
    var y = document.getElementById("menuOverlay");
    var z = document.getElementById("menuButton");
    if (z.className.indexOf("w3-text-gray") == -1) {
        z.className += " w3-text-gray";
    } else { 
        z.className = z.className.replace(" w3-text-gray", "");
    }
    if (z.className.indexOf("w3-gray") == -1) {
        z.className += " w3-gray";
    } else { 
        z.className = z.className.replace(" w3-gray", "");
    }
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else { 
        x.className = x.className.replace(" w3-show", "");
    }
    if (y.className.indexOf("w3-show") == -1) {
        y.className += " w3-show";
    } else { 
        y.className = y.className.replace(" w3-show", "");
    }

}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == document.getElementById("saveModal")) {
        hideAndResetModal();
    }
    if (event.target == document.getElementById("driveSaveModal")) {
        resetDriveSaveModal();
    }
    if (event.target == document.getElementById("driveLoadModal")) {
        resetDriveLoadModal();
    }
    if (event.target == document.getElementById("menuOverlay")) {
        openMenu();
    }
    
}

</script>

<script src="https://apis.google.com/js/client.js?onload=checkAuth"></script>


</body>
</html>